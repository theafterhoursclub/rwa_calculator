{
  "version": "1",
  "metadata": {
    "marimo_version": "0.19.4"
  },
  "cells": [
    {
      "id": "Hbol",
      "code_hash": "cffbe0e2fe3883d908f6c18ccc996726",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "vblA",
      "code_hash": "bb125dcecb87a1dcda8c40ecb1746f35",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"data-configuration\">Data Configuration</h3></span><marimo-ui-element object-id='vblA-0' random-id='69018bad-61c9-a373-3c87-00a5895943bd'><marimo-text data-initial-value='&quot;C:&#92;&#92;Users&#92;&#92;philm&#92;&#92;PycharmProjects&#92;&#92;rwa_calculator&#92;&#92;tests&#92;&#92;fixtures&quot;' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Data Path&lt;/span&gt;&lt;/span&gt;&quot;' data-placeholder='&quot;Enter path to data directory&quot;' data-kind='&quot;text&quot;' data-full-width='true' data-disabled='false' data-debounce='true'></marimo-text></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "bkHC",
      "code_hash": "df6418e35c3d46907ac080f854087f40",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: row;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 2rem'><marimo-ui-element object-id='bkHC-0' random-id='ab969e05-14d0-cef0-213b-c285e51db909'><marimo-dropdown data-initial-value='[&quot;CRR&quot;]' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Regulatory Framework&lt;/span&gt;&lt;/span&gt;&quot;' data-options='[&quot;CRR&quot;,&quot;BASEL_3_1&quot;]' data-allow-select-none='false' data-searchable='false' data-full-width='false'></marimo-dropdown></marimo-ui-element><marimo-ui-element object-id='bkHC-1' random-id='ed26053d-0078-7a55-fafe-6ce7efc727e7'><marimo-dropdown data-initial-value='[&quot;parquet&quot;]' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Data Format&lt;/span&gt;&lt;/span&gt;&quot;' data-options='[&quot;parquet&quot;,&quot;csv&quot;]' data-allow-select-none='false' data-searchable='false' data-full-width='false'></marimo-dropdown></marimo-ui-element><marimo-ui-element object-id='bkHC-2' random-id='c6ebb19a-4e91-ab9b-be94-e86d93e6a14a'><marimo-switch data-initial-value='false' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Enable IRB Approaches&lt;/span&gt;&lt;/span&gt;&quot;' data-disabled='false'></marimo-switch></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "lEQa",
      "code_hash": "28365339ee399857e281842ae1664bab",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<marimo-ui-element object-id='lEQa-0' random-id='7c8a9f6d-f946-b81c-c2c4-da5042383414'><marimo-date data-initial-value='&quot;2026-01-19&quot;' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Reporting Date&lt;/span&gt;&lt;/span&gt;&quot;' data-start='&quot;0001-01-01&quot;' data-stop='&quot;9999-12-31&quot;' data-full-width='false' data-disabled='false'></marimo-date></marimo-ui-element>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "PKri",
      "code_hash": "b038e380080ac5bc886bf065a4132fd0",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<marimo-callout-output data-html='&quot;&lt;span&gt;Data path valid. Found 15 required files.&lt;/span&gt;&quot;' data-kind='&quot;success&quot;'></marimo-callout-output>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "Xref",
      "code_hash": "5bf517263380795da2bd4d46e652e0b7",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: row;justify-content: center;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><marimo-ui-element object-id='Xref-0' random-id='aec63246-a208-e804-80fe-66dce01e98e8'><marimo-button data-initial-value='0' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Run Calculation&lt;/span&gt;&lt;/span&gt;&quot;' data-kind='&quot;neutral&quot;' data-disabled='false' data-full-width='false'></marimo-button></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "SFPL",
      "code_hash": "5f9fb60ab59f8d71b5c19fd1e4ec6261",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<marimo-callout-output data-html='&quot;&lt;span&gt;Calculation completed successfully!&lt;/span&gt;&quot;' data-kind='&quot;success&quot;'></marimo-callout-output>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "BYtC",
      "code_hash": "a14579a99c8085e08494165e234359d4",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"summary-statistics\">Summary Statistics</h2>\n<table>\n<thead>\n<tr>\n<th>Metric</th>\n<th>Value</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>Total EAD</strong></td>\n<td>384,109,768</td>\n</tr>\n<tr>\n<td><strong>Total RWA</strong></td>\n<td>140,240,796</td>\n</tr>\n<tr>\n<td><strong>Average Risk Weight</strong></td>\n<td>36.51%</td>\n</tr>\n<tr>\n<td><strong>Exposure Count</strong></td>\n<td>77</td>\n</tr>\n<tr>\n<td><strong>SA RWA</strong></td>\n<td>53,733,137</td>\n</tr>\n<tr>\n<td><strong>IRB RWA</strong></td>\n<td>86,507,659</td>\n</tr>\n<tr>\n<td><strong>Slotting RWA</strong></td>\n<td>0</td>\n</tr>\n<tr>\n<td><strong>Floor Applied</strong></td>\n<td>No</td>\n</tr>\n<tr>\n<td><strong>Floor Impact</strong></td>\n<td>0</td>\n</tr>\n</tbody>\n</table></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "RGSE",
      "code_hash": "66917b6e705e90823d1ef65d86f5869e",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"performance\">Performance</h3>\n<ul>\n<li><strong>Duration</strong>: 0.62 seconds</li>\n<li><strong>Throughput</strong>: 125 exposures/second</li>\n</ul></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "Kclp",
      "code_hash": "097bc968eb9d02c48219e64e201f371f",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert contents\"><h2 id=\"detailed-results\">Detailed Results</h2></span><marimo-ui-element object-id='Kclp-0' random-id='a7320b7d-669f-f6d1-4752-d6229c1d6ed8'><marimo-table data-initial-value='[]' data-label='null' data-data='&quot;[{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SOV_UK_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;sovereign&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:1000000.0,&#92;&quot;risk_weight&#92;&quot;:0.0,&#92;&quot;rwa_final&#92;&quot;:0.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SOV_US_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;sovereign&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:4645136.842105263,&#92;&quot;risk_weight&#92;&quot;:0.0,&#92;&quot;rwa_final&#92;&quot;:0.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SOV_BR_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;sovereign&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:2000000.0,&#92;&quot;risk_weight&#92;&quot;:0.0,&#92;&quot;rwa_final&#92;&quot;:0.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_INST_UK_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;institution&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:49943578.94736842,&#92;&quot;risk_weight&#92;&quot;:0.2,&#92;&quot;rwa_final&#92;&quot;:9988715.789473685},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_INST_UK_003&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;institution&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:1000000.0,&#92;&quot;risk_weight&#92;&quot;:0.3,&#92;&quot;rwa_final&#92;&quot;:300000.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_INST_UR_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;institution&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:9861052.631578946,&#92;&quot;risk_weight&#92;&quot;:0.29859094790777113,&#92;&quot;rwa_final&#92;&quot;:2944421.052631579},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SL_AIRB_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;other&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:10000000.0,&#92;&quot;risk_weight&#92;&quot;:1.0,&#92;&quot;rwa_final&#92;&quot;:10000000.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SL_PF_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;other&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:10000000.0,&#92;&quot;risk_weight&#92;&quot;:1.0,&#92;&quot;rwa_final&#92;&quot;:10000000.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SL_PF_002&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;other&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:10000000.0,&#92;&quot;risk_weight&#92;&quot;:1.0,&#92;&quot;rwa_final&#92;&quot;:10000000.0},{&#92;&quot;exposure_reference&#92;&quot;:&#92;&quot;LOAN_SL_IPRE_001&#92;&quot;,&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;other&#92;&quot;,&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;ead_final&#92;&quot;:5000000.0,&#92;&quot;risk_weight&#92;&quot;:1.0,&#92;&quot;rwa_final&#92;&quot;:5000000.0}]&quot;' data-total-rows='77' data-total-columns='6' data-max-columns='50' data-banner-text='&quot;&quot;' data-pagination='true' data-page-size='10' data-field-types='[[&quot;exposure_reference&quot;,[&quot;string&quot;,&quot;str&quot;]],[&quot;exposure_class&quot;,[&quot;string&quot;,&quot;str&quot;]],[&quot;approach_applied&quot;,[&quot;string&quot;,&quot;str&quot;]],[&quot;ead_final&quot;,[&quot;number&quot;,&quot;f64&quot;]],[&quot;risk_weight&quot;,[&quot;number&quot;,&quot;f64&quot;]],[&quot;rwa_final&quot;,[&quot;number&quot;,&quot;f64&quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='true' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'></marimo-table></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "emfo",
      "code_hash": "3c4ac2f6cabb0ab3cb7a4edfa89c71f0",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"summary-by-exposure-class\">Summary by Exposure Class</h3></span><marimo-ui-element object-id='emfo-0' random-id='1786f01d-2d98-a5e7-abb2-3ee913eea11a'><marimo-table data-initial-value='[]' data-label='null' data-data='&quot;[{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;corporate&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:238500000.0,&#92;&quot;total_rwa&#92;&quot;:79258454.06751518,&#92;&quot;exposure_count&#92;&quot;:41,&#92;&quot;avg_risk_weight&#92;&quot;:0.33232056212794625},{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;corporate_sme&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:33050000.0,&#92;&quot;total_rwa&#92;&quot;:7106125.658615474,&#92;&quot;exposure_count&#92;&quot;:15,&#92;&quot;avg_risk_weight&#92;&quot;:0.27567047883523166},{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;other&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:40000000.0,&#92;&quot;total_rwa&#92;&quot;:40000000.0,&#92;&quot;exposure_count&#92;&quot;:5,&#92;&quot;avg_risk_weight&#92;&quot;:1.0},{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;institution&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:63304631.578947365,&#92;&quot;total_rwa&#92;&quot;:13733136.842105264,&#92;&quot;exposure_count&#92;&quot;:4,&#92;&quot;avg_risk_weight&#92;&quot;:0.21693731563667082},{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;retail_mortgage&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:1350000.0,&#92;&quot;total_rwa&#92;&quot;:71303.37911130594,&#92;&quot;exposure_count&#92;&quot;:2,&#92;&quot;avg_risk_weight&#92;&quot;:0.05281731786022662},{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;retail_other&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:260000.0,&#92;&quot;total_rwa&#92;&quot;:71776.13229129065,&#92;&quot;exposure_count&#92;&quot;:7,&#92;&quot;avg_risk_weight&#92;&quot;:0.2760620472741948},{&#92;&quot;exposure_class&#92;&quot;:&#92;&quot;sovereign&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:7645136.842105263,&#92;&quot;total_rwa&#92;&quot;:0.0,&#92;&quot;exposure_count&#92;&quot;:3,&#92;&quot;avg_risk_weight&#92;&quot;:0.0}]&quot;' data-total-rows='7' data-total-columns='5' data-max-columns='50' data-banner-text='&quot;&quot;' data-pagination='false' data-page-size='10' data-field-types='[[&quot;exposure_class&quot;,[&quot;string&quot;,&quot;str&quot;]],[&quot;total_ead&quot;,[&quot;number&quot;,&quot;f64&quot;]],[&quot;total_rwa&quot;,[&quot;number&quot;,&quot;f64&quot;]],[&quot;exposure_count&quot;,[&quot;integer&quot;,&quot;u32&quot;]],[&quot;avg_risk_weight&quot;,[&quot;number&quot;,&quot;f64&quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='false' data-show-data-types='true' data-show-page-size-selector='true' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'></marimo-table></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "Hstk",
      "code_hash": "ef827137957894f3800f0844be5d9472",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"summary-by-approach\">Summary by Approach</h3></span><marimo-ui-element object-id='Hstk-0' random-id='9d04f144-24f6-3c77-f03e-5de43808d691'><marimo-table data-initial-value='[]' data-label='null' data-data='&quot;[{&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;advanced_irb&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:273160000.0,&#92;&quot;total_rwa&#92;&quot;:86507659.23753324,&#92;&quot;exposure_count&#92;&quot;:65,&#92;&quot;total_expected_loss&#92;&quot;:357941.00000000006},{&#92;&quot;approach_applied&#92;&quot;:&#92;&quot;SA&#92;&quot;,&#92;&quot;total_ead&#92;&quot;:110949768.42105263,&#92;&quot;total_rwa&#92;&quot;:53733136.84210526,&#92;&quot;exposure_count&#92;&quot;:12,&#92;&quot;total_expected_loss&#92;&quot;:0.0}]&quot;' data-total-rows='2' data-total-columns='5' data-max-columns='50' data-banner-text='&quot;&quot;' data-pagination='false' data-page-size='10' data-field-types='[[&quot;approach_applied&quot;,[&quot;string&quot;,&quot;str&quot;]],[&quot;total_ead&quot;,[&quot;number&quot;,&quot;f64&quot;]],[&quot;total_rwa&quot;,[&quot;number&quot;,&quot;f64&quot;]],[&quot;exposure_count&quot;,[&quot;integer&quot;,&quot;u32&quot;]],[&quot;total_expected_loss&quot;,[&quot;number&quot;,&quot;f64&quot;]]]' data-show-filters='true' data-show-download='true' data-show-column-summaries='false' data-show-data-types='true' data-show-page-size-selector='false' data-show-column-explorer='true' data-show-chart-builder='true' data-row-headers='[]' data-has-stable-row-id='false' data-lazy='false' data-preload='false'></marimo-table></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "nWHF",
      "code_hash": "55fc7801d51996e0a6d28ef9867ef646",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    },
    {
      "id": "iLit",
      "code_hash": "fdd84dbb413765e8e7a01c5e0ce8f41a",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/html": "<div style='display: flex;flex: 1;flex-direction: column;justify-content: flex-start;align-items: normal;flex-wrap: nowrap;gap: 0.5rem'><span class=\"markdown prose dark:prose-invert contents\"><h3 id=\"export-results\">Export Results</h3></span><marimo-ui-element object-id='iLit-0' random-id='1cb79ae8-4cbf-5f0b-6a52-fe57bb37540c'><marimo-download data-initial-value='null' data-label='&quot;&lt;span class=&#92;&quot;markdown prose dark:prose-invert contents&#92;&quot;&gt;&lt;span class=&#92;&quot;paragraph&#92;&quot;&gt;Download CSV&lt;/span&gt;&lt;/span&gt;&quot;' data-data='&quot;./@file/68913-17636-KTkP5shE.xls&quot;' data-filename='&quot;rwa_results.csv&quot;' data-disabled='false' data-lazy='false'></marimo-download></marimo-ui-element></div>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "MJUe",
      "code_hash": "199288f889e7b7e4094fab8cc0595cbf",
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/markdown": "<span class=\"markdown prose dark:prose-invert contents\"><h1 id=\"rwa-calculator\">RWA Calculator</h1>\n<hr /></span>"
          }
        }
      ],
      "console": []
    },
    {
      "id": "ZHCJ",
      "code_hash": null,
      "outputs": [
        {
          "type": "data",
          "data": {
            "text/plain": ""
          }
        }
      ],
      "console": []
    }
  ]
}